{"version":3,"file":"static/chunks/pages/sign-in-99bde4331dbb636a.js","mappings":"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","sources":["webpack://_N_E/?85d1","webpack://_N_E/./src/pages/sign-in.tsx","webpack://_N_E/./node_modules/.pnpm/@mantine+core@7.9.0_@mantine+hooks@7.9.0_@types+react@18.2.51_react-dom@18.2.0_react@18.2.0/node_modules/@mantine/core/esm/components/Center/Center.module.css.mjs","webpack://_N_E/./node_modules/.pnpm/@mantine+core@7.9.0_@mantine+hooks@7.9.0_@types+react@18.2.51_react-dom@18.2.0_react@18.2.0/node_modules/@mantine/core/esm/components/Center/Center.mjs"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/sign-in\",\n      function () {\n        return require(\"private-next-pages/sign-in.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/sign-in\"])\n      });\n    }\n  ","import React from \"react\";\nimport Head from \"next/head\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport type { PaperProps } from \"@mantine/core\";\nimport {\n  TextInput,\n  PasswordInput,\n  Paper,\n  Button,\n  Divider,\n  Anchor,\n  Stack,\n  Center,\n  Text,\n} from \"@mantine/core\";\nimport { toast } from \"react-hot-toast\";\nimport { AiOutlineGithub, AiOutlineGoogle } from \"react-icons/ai\";\nimport Layout from \"src/layout/Layout\";\nimport { supabase } from \"src/lib/api/supabase\";\nimport { isIframe } from \"src/lib/utils/widget\";\nimport useUser from \"src/store/useUser\";\n\nexport function AuthenticationForm(props: PaperProps) {\n  const { push } = useRouter();\n  const setSession = useUser(state => state.setSession);\n  const isAuthenticated = useUser(state => state.isAuthenticated);\n  const [sessionLoading, setSessionLoading] = React.useState(false);\n  const [userData, setUserData] = React.useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n  });\n\n  const onSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setSessionLoading(true);\n\n    const { data, error } = await supabase.auth.signInWithPassword({\n      email: userData.email,\n      password: userData.password,\n    });\n\n    if (error) {\n      setSessionLoading(false);\n      return toast.error(error.message);\n    }\n\n    await setSession(data.session);\n    push(\"/editor\");\n    setSessionLoading(false);\n  };\n\n  const handleLoginClick = async (provider: \"github\" | \"google\") => {\n    setSessionLoading(true);\n    await supabase.auth.signInWithOAuth({\n      provider,\n      options: { redirectTo: `${window.location.origin}/editor` },\n    });\n    setSessionLoading(false);\n  };\n\n  if (isAuthenticated) {\n    return (\n      <Paper p=\"lg\" maw={400} style={{ textAlign: \"center\" }}>\n        <Text fz=\"sm\" c=\"dark\">\n          You are already signed in. Click the button below to go to the editor.\n        </Text>\n        <Link href=\"/editor\">\n          <Button mt=\"lg\" color=\"dark\" size=\"lg\">\n            GO TO EDITOR\n          </Button>\n        </Link>\n      </Paper>\n    );\n  }\n\n  return (\n    <Paper {...props} style={{ textAlign: \"left\" }}>\n      <form onSubmit={onSubmit}>\n        <Stack>\n          <TextInput\n            name=\"email\"\n            required\n            label=\"Email\"\n            placeholder=\"hello@jsoncrack.com\"\n            value={userData.email}\n            onChange={event => setUserData(d => ({ ...d, email: event.target.value }))}\n            radius=\"sm\"\n            style={{ color: \"black\" }}\n          />\n\n          <PasswordInput\n            name=\"password\"\n            required\n            label=\"Password\"\n            placeholder=\"∗∗∗∗∗∗∗∗∗∗∗\"\n            value={userData.password}\n            onChange={event => setUserData(d => ({ ...d, password: event.target.value }))}\n            radius=\"sm\"\n            style={{ color: \"black\" }}\n          />\n\n          <Button color=\"dark\" type=\"submit\" radius=\"sm\" loading={sessionLoading}>\n            Sign in\n          </Button>\n\n          <Stack gap=\"sm\" mx=\"auto\" align=\"center\">\n            <Anchor component={Link} prefetch={false} href=\"/forgot-password\" c=\"dark\" size=\"xs\">\n              Forgot your password?\n            </Anchor>\n          </Stack>\n        </Stack>\n      </form>\n\n      <Divider my=\"lg\" />\n\n      <Stack mb=\"md\" mt=\"md\">\n        <Button\n          radius=\"sm\"\n          leftSection={<AiOutlineGoogle size=\"20\" />}\n          onClick={() => handleLoginClick(\"google\")}\n          color=\"red\"\n          variant=\"outline\"\n        >\n          Sign in with Google\n        </Button>\n        <Button\n          radius=\"sm\"\n          leftSection={<AiOutlineGithub size=\"20\" />}\n          onClick={() => handleLoginClick(\"github\")}\n          color=\"dark\"\n          variant=\"outline\"\n        >\n          Sign in with GitHub\n        </Button>\n      </Stack>\n    </Paper>\n  );\n}\n\nconst SignIn = () => {\n  const { isReady, push, query } = useRouter();\n  const hasSession = useUser(state => !!state.user);\n  const setSession = useUser(state => state.setSession);\n  const isPasswordReset = query?.type === \"recovery\" && !query?.error;\n\n  React.useEffect(() => {\n    if (isIframe()) {\n      push(\"/\");\n      return;\n    }\n\n    if (!isReady) return;\n\n    if (query?.access_token && query?.refresh_token) {\n      (async () => {\n        const { data, error } = await supabase.auth.setSession({\n          access_token: query.access_token as string,\n          refresh_token: query.refresh_token as string,\n        });\n\n        if (error) return toast.error(error.message);\n        if (data.session) setSession(data.session);\n      })();\n    }\n\n    if (hasSession && !isPasswordReset) push(\"/editor\");\n  }, [isReady, hasSession, push, isPasswordReset, query, setSession]);\n\n  if (!isReady) return null;\n\n  return (\n    <Layout>\n      <Head>\n        <title>Sign In - JSON Crack</title>\n        <link rel=\"canonical\" href=\"https://app.jsoncrack.com/sign-in\" />\n      </Head>\n      <Paper mt={100} mx=\"auto\" maw={400} p=\"lg\" withBorder>\n        <AuthenticationForm />\n      </Paper>\n      <Center my=\"xl\">\n        <Anchor component={Link} prefetch={false} href=\"/sign-up\" c=\"gray.5\" fw=\"bold\">\n          Don&apos;t have an account?\n        </Anchor>\n      </Center>\n    </Layout>\n  );\n};\n\nexport default SignIn;\n","'use client';\nvar classes = {\"root\":\"m_4451eb3a\"};\n\nexport { classes as default };\n//# sourceMappingURL=Center.module.css.mjs.map\n","'use client';\nimport { jsx } from 'react/jsx-runtime';\nimport 'react';\nimport '@mantine/hooks';\nimport 'clsx';\nimport '../../core/MantineProvider/Mantine.context.mjs';\nimport '../../core/MantineProvider/default-theme.mjs';\nimport '../../core/MantineProvider/MantineProvider.mjs';\nimport '../../core/MantineProvider/MantineThemeProvider/MantineThemeProvider.mjs';\nimport { useProps } from '../../core/MantineProvider/use-props/use-props.mjs';\nimport '../../core/MantineProvider/MantineCssVariables/MantineCssVariables.mjs';\nimport { useStyles } from '../../core/styles-api/use-styles/use-styles.mjs';\nimport { Box } from '../../core/Box/Box.mjs';\nimport { polymorphicFactory } from '../../core/factory/polymorphic-factory.mjs';\nimport '../../core/DirectionProvider/DirectionProvider.mjs';\nimport classes from './Center.module.css.mjs';\n\nconst defaultProps = {};\nconst Center = polymorphicFactory((_props, ref) => {\n  const props = useProps(\"Center\", defaultProps, _props);\n  const { classNames, className, style, styles, unstyled, vars, inline, mod, ...others } = props;\n  const getStyles = useStyles({\n    name: \"Center\",\n    props,\n    classes,\n    className,\n    style,\n    classNames,\n    styles,\n    unstyled,\n    vars\n  });\n  return /* @__PURE__ */ jsx(Box, { ref, mod: [{ inline }, mod], ...getStyles(\"root\"), ...others });\n});\nCenter.classes = classes;\nCenter.displayName = \"@mantine/core/Center\";\n\nexport { Center };\n//# sourceMappingURL=Center.mjs.map\n"],"names":["window","__NEXT_P","push","__webpack_require__","AuthenticationForm","props","useRouter","setSession","useUser","state","isAuthenticated","sessionLoading","setSessionLoading","React","userData","setUserData","name","email","password","onSubmit","e","preventDefault","data","error","supabase","auth","signInWithPassword","toast","message","session","handleLoginClick","provider","signInWithOAuth","options","redirectTo","concat","location","origin","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","Paper","p","maw","style","textAlign","jsx","Text","fz","c","Link","href","Button","mt","color","size","form","Stack","TextInput","required","label","placeholder","value","onChange","event","d","target","radius","PasswordInput","type","loading","gap","mx","align","Anchor","component","prefetch","Divider","my","mb","leftSection","AiOutlineGoogle","onClick","variant","AiOutlineGithub","__webpack_exports__","isReady","query","hasSession","user","isPasswordReset","isIframe","access_token","refresh_token","Layout","Head","title","link","rel","withBorder","Center","fw","classes","defaultProps","polymorphic_factory","b","_props","ref","use_props","w","classNames","className","styles","unstyled","vars","inline","mod","others","getStyles","use_styles","y","jsx_runtime","Box","x","displayName"],"sourceRoot":""}