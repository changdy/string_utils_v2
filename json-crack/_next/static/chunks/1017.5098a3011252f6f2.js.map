{"version":3,"file":"static/chunks/1017.5098a3011252f6f2.js","mappings":"2LAOAA,EAAAA,EAAMA,CAACC,MAAM,CAAC,CACZC,MAAO,CAELC,GAAIC,OAAOC,QAAQ,CAACC,MAAM,CAAG,gBAC/B,CACF,GAEA,IAAMC,EAAgB,CACpBC,cAAe,GACfC,aAAc,GACdC,QAAS,CACPC,QAAS,EACX,CACF,CAiEAC,CAAAA,EAAA,QA/DmB,KACjB,IAAMC,EAASC,CAAAA,EAAAA,EAAAA,EAAAA,IACTC,EAAWC,CAAAA,EAAAA,EAAAA,CAAAA,EAAQC,GAASA,EAAMF,QAAQ,EAC1CG,EAAcF,CAAAA,EAAAA,EAAAA,CAAAA,EAAQC,GAASA,EAAMC,WAAW,EAChDC,EAAWH,CAAAA,EAAAA,EAAAA,CAAAA,EAAQC,GAASA,EAAME,QAAQ,EAC1CC,EAAaJ,CAAAA,EAAAA,EAAAA,CAAAA,EAAQC,GAASA,EAAMG,UAAU,EAC9CC,EAAgBL,CAAAA,EAAAA,EAAAA,CAAAA,EAAQC,GAASA,EAAMI,aAAa,EACpDC,EAAQC,CAAAA,EAAAA,EAAAA,CAAAA,EAAUN,GAAUA,EAAMO,eAAe,CAAG,UAAY,SAChEC,EAAWT,CAAAA,EAAAA,EAAAA,CAAAA,EAAQC,GAASA,EAAMS,MAAM,EAqC9C,OAnCAC,EAAAA,SAAe,CAAC,KACdd,MAAAA,GAAAA,EAAQe,SAAS,CAACC,IAAI,CAACC,YAAY,CAACC,qBAAqB,CAAC,CACxDC,SAAU,GACVC,cAAe,GACfC,oBAAqB,GACrB,GAAId,GAAc,CAChBe,QAAS,CACP,CACEC,IAAK,kCACLC,UAAW,CAAC,IAAI,CAChBC,OAAQlB,CACV,EACD,CACF,EAEL,EAAG,CAACA,EAAYP,MAAAA,EAAAA,KAAAA,EAAAA,EAAQe,SAAS,CAACC,IAAI,CAACC,YAAY,CAAC,EAEpDH,EAAAA,SAAe,CAAC,KACd,IAAMY,EAAe,IACnB,GAAIlB,IAAiB,CACnB,IAAMmB,EACJ,yEAGF,MADCC,CAAAA,GAAKrC,OAAOsC,KAAK,EAAEC,WAAW,CAAGH,EAC3BA,CACT,CACF,EAIA,OAFApC,OAAOwC,gBAAgB,CAAC,eAAgBL,GAEjC,KACLnC,OAAOyC,mBAAmB,CAAC,eAAgBN,EAC7C,CACF,EAAG,CAAClB,EAAc,EAGhB,GAAAyB,EAAAC,GAAA,EAACC,EAAAA,UACC,GAAAF,EAAAC,GAAA,EAACE,EAAAA,UACC,GAAAH,EAAAC,GAAA,EAACG,EAAAA,EAAMA,CAAAA,CACLC,OAAO,OACPC,SAAU3B,EACVH,MAAOA,EACP+B,MAAOtC,EACPuC,QAAS/C,EACTgD,WAAYC,QAAmBA,SAATrC,EAAAA,OAASqC,CAAAA,EAAAA,CAAM,CAAC,EAAE,GAATA,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAWC,OAAO,GACjDC,SAAU3C,GAAYG,EAAY,CAAEH,SAAAA,EAAU4C,WAAY,EAAK,GAC/DC,QAAS,GAAAd,EAAAC,GAAA,EAACc,EAAAA,CAAcA,CAAAA,CAACC,QAAO,UAK1C,EAIA,IAAMd,EAAsBe,EAAAA,EAAMA,CAACC,GAAG,CAAAC,UAAA,sGAOhChB,EAAgBc,EAAAA,EAAMA,CAACC,GAAG,CAAAC,UAAA","sources":["webpack://_N_E/./src/containers/Editor/TextEditor/index.tsx"],"sourcesContent":["import React from \"react\";\nimport { LoadingOverlay } from \"@mantine/core\";\nimport styled from \"styled-components\";\nimport Editor, { loader, useMonaco } from \"@monaco-editor/react\";\nimport useConfig from \"src/store/useConfig\";\nimport useFile from \"src/store/useFile\";\n\nloader.config({\n  paths: {\n    // vs: \"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.0/min/vs\",\n    vs: window.location.origin + \"/monaco-editor\",\n  },\n});\n\nconst editorOptions = {\n  formatOnPaste: true,\n  formatOnType: true,\n  minimap: {\n    enabled: false,\n  },\n};\n\nconst TextEditor = () => {\n  const monaco = useMonaco();\n  const contents = useFile(state => state.contents);\n  const setContents = useFile(state => state.setContents);\n  const setError = useFile(state => state.setError);\n  const jsonSchema = useFile(state => state.jsonSchema);\n  const getHasChanges = useFile(state => state.getHasChanges);\n  const theme = useConfig(state => (state.darkmodeEnabled ? \"vs-dark\" : \"light\"));\n  const fileType = useFile(state => state.format);\n\n  React.useEffect(() => {\n    monaco?.languages.json.jsonDefaults.setDiagnosticsOptions({\n      validate: true,\n      allowComments: true,\n      enableSchemaRequest: true,\n      ...(jsonSchema && {\n        schemas: [\n          {\n            uri: \"http://myserver/foo-schema.json\",\n            fileMatch: [\"*\"],\n            schema: jsonSchema,\n          },\n        ],\n      }),\n    });\n  }, [jsonSchema, monaco?.languages.json.jsonDefaults]);\n\n  React.useEffect(() => {\n    const beforeunload = (e: BeforeUnloadEvent) => {\n      if (getHasChanges()) {\n        const confirmationMessage =\n          \"Unsaved changes, if you leave before saving  your changes will be lost\";\n\n        (e || window.event).returnValue = confirmationMessage; //Gecko + IE\n        return confirmationMessage;\n      }\n    };\n\n    window.addEventListener(\"beforeunload\", beforeunload);\n\n    return () => {\n      window.removeEventListener(\"beforeunload\", beforeunload);\n    };\n  }, [getHasChanges]);\n\n  return (\n    <StyledEditorWrapper>\n      <StyledWrapper>\n        <Editor\n          height=\"100%\"\n          language={fileType}\n          theme={theme}\n          value={contents}\n          options={editorOptions}\n          onValidate={errors => setError(errors[0]?.message)}\n          onChange={contents => setContents({ contents, skipUpdate: true })}\n          loading={<LoadingOverlay visible />}\n        />\n      </StyledWrapper>\n    </StyledEditorWrapper>\n  );\n};\n\nexport default TextEditor;\n\nconst StyledEditorWrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    user-select: none;\n`;\n\nconst StyledWrapper = styled.div`\n    display: grid;\n    height: calc(100vh - 67px);\n    grid-template-columns: 100%;\n    grid-template-rows: minmax(0, 1fr);\n`;\n"],"names":["loader","config","paths","vs","window","location","origin","editorOptions","formatOnPaste","formatOnType","minimap","enabled","__webpack_exports__","monaco","useMonaco","contents","useFile","state","setContents","setError","jsonSchema","getHasChanges","theme","useConfig","darkmodeEnabled","fileType","format","React","languages","json","jsonDefaults","setDiagnosticsOptions","validate","allowComments","enableSchemaRequest","schemas","uri","fileMatch","schema","beforeunload","confirmationMessage","e","event","returnValue","addEventListener","removeEventListener","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","StyledEditorWrapper","StyledWrapper","Editor","height","language","value","options","onValidate","errors","message","onChange","skipUpdate","loading","LoadingOverlay","visible","styled","div","withConfig"],"sourceRoot":""}